<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard</title>
<link rel="stylesheet" href="../style.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body class="theme-dark">

<div class="main-card" style="max-width:1000px;margin:80px auto;">
  <h1>Admin Dashboard</h1>
  <div style="margin-bottom:15px;">
    <button onclick="loadData('game_clicks')">Game Clicks</button>
  </div>
  <div id="dataArea"></div>
</div>

<script>
const SUPABASE_URL = "https://ssosctqctpmaomhjyapr.supabase.co";
const SUPABASE_ANON_KEY = "sb_publishable_Xj1OB7Bbkmi3_xj8Og6G_w_Wh4PgFWS";
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

async function loadData(table){
  let {data,error} = await supabase.from(table).select().order('timestamp',{ascending:false}).limit(100);
  if(error){document.getElementById("dataArea").innerText="Error fetching data"; return;}
  let html="<table style='width:100%;color:white;border-collapse:collapse;'><tr><th>Item</th><th>Timestamp</th></tr>";
  data.forEach(d=>{
    let item = d.game_name;
    html+=`<tr><td>${item}</td><td>${new Date(d.timestamp).toLocaleString()}</td></tr>`;
  });
  html+="</table>";
  document.getElementById("dataArea").innerHTML=html;
}
</script>
</body>
</html>
